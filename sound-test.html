<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>éŸ³æ•ˆæ¸¬è©¦ - ä¹ä¹ä¹˜æ³•è¡¨</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .title {
            color: white;
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            color: rgba(255,255,255,0.9);
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .global-controls {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .control-group:last-child {
            margin-bottom: 0;
        }

        .control-label {
            font-weight: bold;
            color: #333;
            min-width: 80px;
        }

        .slider {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            border: none;
        }

        .value-display {
            font-weight: bold;
            color: #4f46e5;
            min-width: 50px;
            text-align: center;
        }

        .sound-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .sound-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .sound-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .sound-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .sound-description {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .sound-params {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #555;
        }

        .play-button {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }

        .play-button:hover {
            background: linear-gradient(135deg, #3730a3, #5b21b6);
            transform: translateY(-2px);
        }

        .play-button:active {
            transform: translateY(0);
        }

        .play-button.playing {
            background: linear-gradient(135deg, #10b981, #059669);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .copy-button {
            width: 100%;
            padding: 10px;
            border: 2px solid #4f46e5;
            border-radius: 8px;
            background: white;
            color: #4f46e5;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .copy-button:hover {
            background: #4f46e5;
            color: white;
        }

        .category-title {
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 40px 0 20px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .note {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
            color: white;
            margin-top: 30px;
            backdrop-filter: blur(10px);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .sound-grid {
                grid-template-columns: 1fr;
            }

            .title {
                font-size: 1.5rem;
            }

            .control-group {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }

            .control-label {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">ğŸµ éŸ³æ•ˆæ¸¬è©¦ä¸­å¿ƒ</h1>
            <p class="subtitle">ä¹ä¹ä¹˜æ³•è¡¨ç·´ç¿’éŸ³æ•ˆé¸æ“‡</p>
        </div>

        <div class="global-controls">
            <div class="control-group">
                <label class="control-label">éŸ³é‡ï¼š</label>
                <input type="range" id="volume-slider" class="slider" min="0.1" max="0.5" value="0.3" step="0.05">
                <span id="volume-value" class="value-display">0.3</span>
            </div>
            <div class="control-group">
                <label class="control-label">é€Ÿåº¦ï¼š</label>
                <input type="range" id="speed-slider" class="slider" min="0.5" max="2" value="1" step="0.1">
                <span id="speed-value" class="value-display">1.0x</span>
            </div>
        </div>

        <h2 class="category-title">ğŸ† ç­”å°éŸ³æ•ˆé¸é …</h2>
        <div class="sound-grid" id="correct-sounds">
            <!-- ç­”å°éŸ³æ•ˆå¡ç‰‡å°‡åœ¨é€™è£¡å‹•æ…‹ç”Ÿæˆ -->
        </div>

        <h2 class="category-title">âŒ ç­”éŒ¯éŸ³æ•ˆé¸é …</h2>
        <div class="sound-grid" id="incorrect-sounds">
            <!-- ç­”éŒ¯éŸ³æ•ˆå¡ç‰‡å°‡åœ¨é€™è£¡å‹•æ…‹ç”Ÿæˆ -->
        </div>

        <div class="note">
            <h3>ğŸ“ ä½¿ç”¨èªªæ˜</h3>
            <p>â€¢ èª¿æ•´éŸ³é‡å’Œé€Ÿåº¦ä¾†æ¸¬è©¦ä¸åŒæ•ˆæœ</p>
            <p>â€¢ é»æ“Šã€Œæ’­æ”¾éŸ³æ•ˆã€è©¦è½</p>
            <p>â€¢ é»æ“Šã€Œè¤‡è£½ç¨‹å¼ç¢¼ã€å¯ä»¥ç²å¾—è©²éŸ³æ•ˆçš„å¯¦ä½œç¨‹å¼ç¢¼</p>
            <p>â€¢ å»ºè­°é¸æ“‡éŸ³é‡é©ä¸­ï¼ˆ0.2-0.3ï¼‰çš„éŸ³æ•ˆï¼Œé¿å…åš‡åˆ°å°æœ‹å‹</p>
        </div>
    </div>

    <script>
        // å…¨åŸŸéŸ³æ•ˆæ§åˆ¶
        let globalVolume = 0.3;
        let globalSpeed = 1.0;

        // éŸ³æ•ˆå®šç¾©
        const correctSounds = [
            {
                name: "ç¶“å…¸å‹åˆ©è™Ÿè§’",
                description: "ã€Œç­‰èƒ½ç­‰ç™»ç™»ã€çš„ç¶“å…¸å–‡å­éŸ³æ•ˆï¼Œä½¿ç”¨ C-E-G-C å’Œå¼¦é€²è¡Œï¼Œé©åˆé‡è¦æˆå°±",
                params: "4å€‹éŸ³ç¬¦ | Squareæ³¢å½¢ | 0.8ç§’",
                generate: function(audioContext, volume, speed) {
                    const notes = [
                        {freq: 261.63, start: 0, duration: 0.2 / speed},      // C4 - ç­‰
                        {freq: 329.63, start: 0.2 / speed, duration: 0.2 / speed}, // E4 - èƒ½
                        {freq: 392.00, start: 0.4 / speed, duration: 0.2 / speed}, // G4 - ç­‰
                        {freq: 523.25, start: 0.6 / speed, duration: 0.3 / speed}  // C5 - ç™»ç™»ï½
                    ];

                    notes.forEach(note => {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();

                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);

                        oscillator.type = 'square';
                        oscillator.frequency.value = note.freq;

                        gainNode.gain.setValueAtTime(0, audioContext.currentTime + note.start);
                        gainNode.gain.linearRampToValueAtTime(volume, audioContext.currentTime + note.start + 0.02 / speed);
                        gainNode.gain.exponentialRampToValueAtTime(volume * 0.7, audioContext.currentTime + note.start + note.duration * 0.7);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + note.start + note.duration);

                        oscillator.start(audioContext.currentTime + note.start);
                        oscillator.stop(audioContext.currentTime + note.start + note.duration);
                    });
                }
            },
            {
                name: "éŠæˆ²éé—œéŸ³æ•ˆ",
                description: "å¿«é€Ÿä¸Šå‡çš„éŸ³éšï¼Œæ˜äº®æ­¡å¿«ï¼Œé¡ä¼¼ Mario éé—œéŸ³æ•ˆ",
                params: "6å€‹éŸ³ç¬¦ | Sineæ³¢å½¢ | 0.6ç§’",
                generate: function(audioContext, volume, speed) {
                    const notes = [261.63, 329.63, 392.00, 523.25, 659.25, 783.99]; // C-E-G-C-E-G

                    notes.forEach((freq, i) => {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();

                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);

                        oscillator.type = 'sine';
                        oscillator.frequency.value = freq;

                        const startTime = audioContext.currentTime + (i * 0.1 / speed);
                        const duration = 0.15 / speed;

                        gainNode.gain.setValueAtTime(0, startTime);
                        gainNode.gain.linearRampToValueAtTime(volume, startTime + 0.01 / speed);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + duration);

                        oscillator.start(startTime);
                        oscillator.stop(startTime + duration);
                    });
                }
            },
            {
                name: "ç°¡çŸ­æˆåŠŸéŸ³",
                description: "å…©å€‹éŸ³ç¬¦çš„ç°¡å–®çµ„åˆï¼Œæ¸…è„†çš„éˆ´è²æ•ˆæœï¼Œä¸æœƒéæ–¼çªå…€",
                params: "2å€‹éŸ³ç¬¦ | Triangleæ³¢å½¢ | 0.4ç§’",
                generate: function(audioContext, volume, speed) {
                    const notes = [523.25, 783.99]; // C5, G5

                    notes.forEach((freq, i) => {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();

                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);

                        oscillator.type = 'triangle';
                        oscillator.frequency.value = freq;

                        const startTime = audioContext.currentTime + (i * 0.15 / speed);
                        const duration = 0.2 / speed;

                        gainNode.gain.setValueAtTime(0, startTime);
                        gainNode.gain.linearRampToValueAtTime(volume, startTime + 0.02 / speed);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + duration);

                        oscillator.start(startTime);
                        oscillator.stop(startTime + duration);
                    });
                }
            },
            {
                name: "è±å¯Œè™Ÿè§’éŸ³",
                description: "æ··åˆå¤šå€‹æŒ¯ç›ªå™¨æ¨¡æ“¬çœŸå¯¦å–‡å­ï¼Œæœ‰è±å¯Œçš„æ³›éŸ³å’ŒåŒ…çµ¡æ§åˆ¶",
                params: "æ··åˆéŸ³è‰² | ADSRåŒ…çµ¡ | 0.8ç§’",
                generate: function(audioContext, volume, speed) {
                    const notes = [261.63, 329.63, 392.00, 523.25];

                    notes.forEach((freq, i) => {
                        // åŸºé »
                        const osc1 = audioContext.createOscillator();
                        const gain1 = audioContext.createGain();
                        osc1.type = 'sawtooth';
                        osc1.frequency.value = freq;

                        // äºŒæ¬¡è«§æ³¢
                        const osc2 = audioContext.createOscillator();
                        const gain2 = audioContext.createGain();
                        osc2.type = 'square';
                        osc2.frequency.value = freq * 2;

                        // æ··åˆ
                        const mixer = audioContext.createGain();

                        osc1.connect(gain1);
                        osc2.connect(gain2);
                        gain1.connect(mixer);
                        gain2.connect(mixer);
                        mixer.connect(audioContext.destination);

                        gain1.gain.value = volume * 0.7;
                        gain2.gain.value = volume * 0.3;

                        const startTime = audioContext.currentTime + (i * 0.2 / speed);
                        const duration = 0.25 / speed;

                        mixer.gain.setValueAtTime(0, startTime);
                        mixer.gain.linearRampToValueAtTime(1, startTime + 0.02 / speed);
                        mixer.gain.linearRampToValueAtTime(0.7, startTime + 0.05 / speed);
                        mixer.gain.setValueAtTime(0.7, startTime + duration - 0.05 / speed);
                        mixer.gain.exponentialRampToValueAtTime(0.01, startTime + duration);

                        osc1.start(startTime);
                        osc2.start(startTime);
                        osc1.stop(startTime + duration);
                        osc2.stop(startTime + duration);
                    });
                }
            }
        ];

        const incorrectSounds = [
            {
                name: "æº«å’Œä¸‹é™éŸ³",
                description: "æŸ”å’Œçš„ä¸‹é™éŸ³èª¿ï¼Œä¸æœƒè®“å°æœ‹å‹æ„Ÿåˆ°æŒ«æŠ˜",
                params: "ä¸‹é™é »ç‡ | Sineæ³¢å½¢ | 0.3ç§’",
                generate: function(audioContext, volume, speed) {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();

                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);

                    oscillator.type = 'sine';
                    const duration = 0.3 / speed;

                    oscillator.frequency.setValueAtTime(350, audioContext.currentTime);
                    oscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + duration);

                    gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                    gainNode.gain.linearRampToValueAtTime(volume, audioContext.currentTime + 0.02 / speed);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);

                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + duration);
                }
            },
            {
                name: "ä½æ²‰èœ‚é³´è²",
                description: "æº«å’Œçš„ä½é »èœ‚é³´ï¼Œæç¤ºä½†ä¸åˆºè€³",
                params: "ä½é » | Squareæ³¢å½¢ | 0.4ç§’",
                generate: function(audioContext, volume, speed) {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();

                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);

                    oscillator.type = 'square';
                    oscillator.frequency.value = 150;

                    const duration = 0.4 / speed;

                    gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                    gainNode.gain.linearRampToValueAtTime(volume, audioContext.currentTime + 0.05 / speed);
                    gainNode.gain.setValueAtTime(volume, audioContext.currentTime + duration - 0.1 / speed);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);

                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + duration);
                }
            },
            {
                name: "æ³¡æ³¡ç ´è£‚è²",
                description: "è¼•æŸ”çš„æ³¡æ³¡ç ´è£‚éŸ³æ•ˆï¼Œæœ‰è¶£è€Œä¸ä»¤äººæ²®å–ª",
                params: "ç™½å™ªéŸ³ | æ¿¾æ³¢å™¨ | 0.2ç§’",
                generate: function(audioContext, volume, speed) {
                    // å‰µå»ºç™½å™ªéŸ³
                    const bufferSize = audioContext.sampleRate * 0.2 / speed;
                    const buffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);
                    const data = buffer.getChannelData(0);

                    for (let i = 0; i < bufferSize; i++) {
                        data[i] = (Math.random() * 2 - 1) * 0.3;
                    }

                    const source = audioContext.createBufferSource();
                    const filter = audioContext.createBiquadFilter();
                    const gainNode = audioContext.createGain();

                    source.buffer = buffer;
                    filter.type = 'highpass';
                    filter.frequency.value = 2000;

                    source.connect(filter);
                    filter.connect(gainNode);
                    gainNode.connect(audioContext.destination);

                    const duration = 0.2 / speed;

                    gainNode.gain.setValueAtTime(volume, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);

                    source.start(audioContext.currentTime);
                    source.stop(audioContext.currentTime + duration);
                }
            }
        ];

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            setupControls();
            renderSoundCards();
        });

        function setupControls() {
            const volumeSlider = document.getElementById('volume-slider');
            const speedSlider = document.getElementById('speed-slider');
            const volumeValue = document.getElementById('volume-value');
            const speedValue = document.getElementById('speed-value');

            volumeSlider.addEventListener('input', function() {
                globalVolume = parseFloat(this.value);
                volumeValue.textContent = globalVolume.toFixed(1);
            });

            speedSlider.addEventListener('input', function() {
                globalSpeed = parseFloat(this.value);
                speedValue.textContent = globalSpeed.toFixed(1) + 'x';
            });
        }

        function renderSoundCards() {
            renderSounds(correctSounds, 'correct-sounds');
            renderSounds(incorrectSounds, 'incorrect-sounds');
        }

        function renderSounds(sounds, containerId) {
            const container = document.getElementById(containerId);

            sounds.forEach((sound, index) => {
                const card = document.createElement('div');
                card.className = 'sound-card';
                card.innerHTML = `
                    <h3 class="sound-title">${sound.name}</h3>
                    <p class="sound-description">${sound.description}</p>
                    <div class="sound-params">${sound.params}</div>
                    <button class="play-button" onclick="playSound(${containerId === 'correct-sounds' ? 'correctSounds' : 'incorrectSounds'}, ${index}, this)">
                        ğŸ”Š æ’­æ”¾éŸ³æ•ˆ
                    </button>
                    <button class="copy-button" onclick="copyCode(${containerId === 'correct-sounds' ? 'correctSounds' : 'incorrectSounds'}, ${index})">
                        ğŸ“‹ è¤‡è£½ç¨‹å¼ç¢¼
                    </button>
                `;
                container.appendChild(card);
            });
        }

        function playSound(soundArray, index, button) {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();

            // UI æ•ˆæœ
            button.classList.add('playing');
            button.textContent = 'ğŸ”Š æ’­æ”¾ä¸­...';

            // æ’­æ”¾éŸ³æ•ˆ
            soundArray[index].generate(audioContext, globalVolume, globalSpeed);

            // æ¢å¾©æŒ‰éˆ•ç‹€æ…‹
            setTimeout(() => {
                button.classList.remove('playing');
                button.textContent = 'ğŸ”Š æ’­æ”¾éŸ³æ•ˆ';
            }, 1000 / globalSpeed);
        }

        function copyCode(soundArray, index) {
            const sound = soundArray[index];
            const code = `// ${sound.name}
function play${sound.name.replace(/\s+/g, '')}() {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();

    ${sound.generate.toString().split('\n').slice(1, -1).join('\n    ')}
}

// ä½¿ç”¨æ–¹å¼ï¼š
// play${sound.name.replace(/\s+/g, '')}();`;

            navigator.clipboard.writeText(code).then(() => {
                alert('ç¨‹å¼ç¢¼å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼');
            }).catch(() => {
                console.log('ç¨‹å¼ç¢¼è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¤‡è£½ï¼š\n\n' + code);
            });
        }
    </script>
</body>
</html>